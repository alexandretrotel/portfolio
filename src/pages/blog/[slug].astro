---
import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';
import BlogPostPage from "@/components/pages/blog-post-page.astro";
import type { BlogCollection } from "@/content.config";
import { defaultLocale } from "@/i18n/locales";
import { getBlogEntry } from "@/i18n/utils";

export const getStaticPaths = async () => {
  const blogEntry = getBlogEntry(defaultLocale);
  const posts = await getCollection(blogEntry);
  return posts.map((p: (typeof posts)[number]) => ({
    params: { slug: p.id },
    props: { post: p },
  }));
};

interface Props {
  post: CollectionEntry<BlogCollection>;
}

const { post } = Astro.props;

export const prerender = true;
---

<BlogPostPage post={post} />
