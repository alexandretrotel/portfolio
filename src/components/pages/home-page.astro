---
/* eslint-disable jest/require-hook */
import { getCollection } from "astro:content";
import ArrowRight from "@lucide/astro/icons/arrow-right";
import Button from "@/components/ui/button.astro";
import Layout from "@/layouts/main.astro";

const metadata = {
  description: "Alexandre Trotel is a tech entrepreneur and full-stack developer.",
  title: "Alexandre Trotel",
};

const story = {
  authorOf: "I run",
  bio: "Full-stack developer. I build things, ship fast, and iterate. I care about code that works, not code that impresses.",
  checkBlog: "Read the blog",
  name: "Alexandre Trotel.",
  zapStudio: "Zap Studio",
  zapStudioDesc:
    "â€“ open-source tools, libraries, and templates for developers who'd rather ship than write boilerplate.",
};

let showBlog = false;
try {
  const blogPosts = await getCollection("blog");
  showBlog = blogPosts.length > 0;
} catch {
  showBlog = false;
}

const blogHref = "/blog";
---

<Layout title={metadata.title} description={metadata.description}>
  <div class="flex h-full flex-col gap-16">
    <div
      class="flex w-full max-w-xl flex-col gap-6 font-light text-muted-foreground"
    >
      <p class="text-base">
        <span class="font-medium text-foreground text-base">{story.name}</span>
        {story.bio}
      </p>

      <p class="text-base">
        {story.authorOf}
        {" "}
        <a
          class="font-medium text-primary hover:underline text-base"
          href="https://www.zapstudio.dev"
          target="_blank"
          rel="noreferrer"
        >
          {story.zapStudio}
        </a>
        {" "}
        {story.zapStudioDesc}
      </p>

      {showBlog && (
          <div>
            <Button variant="ghost" class="active:scale-95 active:bg-accent">
              <a
                class="flex items-center gap-2 font-medium text-primary text-sm"
                href={blogHref}
              >
                <ArrowRight size={16} />
                {story.checkBlog}
              </a>
            </Button>
          </div>
        )}
    </div>
  </div>
</Layout>
